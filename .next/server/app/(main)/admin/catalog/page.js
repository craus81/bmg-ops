(()=>{var e={};e.id=432,e.ids=[432],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9172:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(1671),r(8522),r(5866),r(2029);var n=r(3191),i=r(8716),a=r(7922),s=r.n(a),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["(main)",{children:["admin",{children:["catalog",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1671)),"/Users/craiggeorge/Desktop/bmg-ops/src/app/(main)/admin/catalog/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8522)),"/Users/craiggeorge/Desktop/bmg-ops/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"/Users/craiggeorge/Desktop/bmg-ops/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/craiggeorge/Desktop/bmg-ops/src/app/(main)/admin/catalog/page.tsx"],p="/(main)/admin/catalog/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/admin/catalog/page",pathname:"/admin/catalog",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7227:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},599:(e,t,r)=>{Promise.resolve().then(r.bind(r,3549))},9378:(e,t,r)=>{Promise.resolve().then(r.bind(r,5236))},6533:()=>{},5047:(e,t,r)=>{"use strict";var n=r(7389);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},3549:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(326),i=r(7577),a=r(5047),s=r(1944),o=r(2567);function l(){let e=(0,a.useRouter)(),{isAdmin:t}=(0,o.a)(),r=(0,s.e)(),[l,u]=(0,i.useState)([]),[x,m]=(0,i.useState)(!0),[g,h]=(0,i.useState)(!1),[f,b]=(0,i.useState)({part_number:"",customer:"Masterack",end_customer:"",vehicle_type:"",graphic_package:"",price:"",proof_pages:"1"}),v=async()=>{if(!f.part_number||!f.customer)return;let{data:e,error:t}=await r.from("catalog").insert({part_number:f.part_number,customer:f.customer,end_customer:f.end_customer,vehicle_type:f.vehicle_type,graphic_package:f.graphic_package,price:Number(f.price)||0,proof_pages:Number(f.proof_pages)||1}).select().single();e&&!t&&(u(t=>[...t,e].sort((e,t)=>e.part_number.localeCompare(t.part_number))),b({part_number:"",customer:"Masterack",end_customer:"",vehicle_type:"",graphic_package:"",price:"",proof_pages:"1"}),h(!1))};return x?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#4a5f78"},children:"Loading..."}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,n.jsxs)("div",{style:{fontSize:"11px",fontWeight:700,color:"#4a5f78",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Part Catalog (",l.length,")"]}),n.jsx("button",{onClick:()=>h(!g),style:{padding:"6px 12px",borderRadius:"8px",background:"#3b82f6",color:"#fff",fontSize:"12px",fontWeight:700},children:g?"Cancel":"+ Add"})]}),g&&(0,n.jsxs)("div",{style:{background:"#141e2b",border:"1px solid #1e2d3d",borderRadius:"10px",padding:"14px",marginBottom:"12px"},children:[n.jsx(p,{label:"Part Number",value:f.part_number,onChange:e=>b({...f,part_number:e})}),(0,n.jsxs)("div",{style:{marginTop:"8px"},children:[n.jsx("label",{style:d,children:"Customer"}),(0,n.jsxs)("select",{value:f.customer,onChange:e=>b({...f,customer:e.target.value}),style:c,children:[n.jsx("option",{children:"Masterack"}),n.jsx("option",{children:"Knapheide"}),n.jsx("option",{children:"Bodewell"}),n.jsx("option",{children:"Designs That Stick"}),n.jsx("option",{children:"Other"})]})]}),n.jsx(p,{label:"End Customer",value:f.end_customer,onChange:e=>b({...f,end_customer:e})}),n.jsx(p,{label:"Vehicle Type",value:f.vehicle_type,onChange:e=>b({...f,vehicle_type:e})}),n.jsx(p,{label:"Graphic Package",value:f.graphic_package,onChange:e=>b({...f,graphic_package:e})}),n.jsx(p,{label:"Price",value:f.price,onChange:e=>b({...f,price:e}),type:"number"}),n.jsx(p,{label:"Proof Pages",value:f.proof_pages,onChange:e=>b({...f,proof_pages:e}),type:"number"}),n.jsx("button",{onClick:v,style:{width:"100%",marginTop:"12px",padding:"12px",borderRadius:"10px",background:"#22c55e",color:"#fff",fontWeight:800,fontSize:"14px"},children:"Save Part Number"})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:l.map(e=>n.jsx("div",{style:{background:"#141e2b",border:"1px solid #1e2d3d",borderRadius:"10px",padding:"12px"},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsxs)("div",{children:[n.jsx("div",{style:{fontWeight:800,fontSize:"15px"},children:e.part_number}),(0,n.jsxs)("div",{style:{fontSize:"12px",color:"#93c5fd",marginTop:"1px"},children:[e.end_customer," — ",e.graphic_package]}),(0,n.jsxs)("div",{style:{fontSize:"11px",color:"#4a5f78"},children:[e.vehicle_type," • ",e.customer]})]}),n.jsx("div",{style:{textAlign:"right"},children:(0,n.jsxs)("div",{style:{fontWeight:800,fontSize:"15px",color:"#4ade80"},children:["$",e.price.toFixed(2)]})})]})},e.id))}),n.jsx("button",{onClick:()=>e.push("/more"),style:{width:"100%",padding:"10px",borderRadius:"10px",marginTop:"14px",border:"1px solid #1e2d3d",background:"transparent",color:"#6b7a8d",fontSize:"13px",fontWeight:700},children:"← Back"})]})}let d={display:"block",fontSize:"10px",fontWeight:700,color:"#4a5f78",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"4px"},c={width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #1e2d3d",background:"#0f1720",color:"#e8ecf1",fontSize:"13px"};function p({label:e,value:t,onChange:r,type:i}){return(0,n.jsxs)("div",{style:{marginTop:"8px"},children:[n.jsx("label",{style:d,children:e}),n.jsx("input",{type:i||"text",value:t,onChange:e=>r(e.target.value),style:c})]})}},5236:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var n=r(326),i=r(2567),a=r(2064);function s({clockStatus:e,activePartNumber:t,activeEndCustomer:r}){let{profile:a,isAdmin:s}=(0,i.a)(),o="in"===e?"\uD83D\uDFE2 Clocked In":"break"===e?"\uD83D\uDFE1 On Break":t?`${t} • ${r}`:"";return(0,n.jsxs)("header",{style:{background:"#141e2b",borderBottom:"1px solid #1e2d3d",padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,zIndex:100},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:"11px",color:"#fff"},children:"BMG"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("span",{style:{fontWeight:700,fontSize:"14px"},children:"BMG Ops"}),n.jsx("span",{style:{background:s?"rgba(139,92,246,0.12)":"rgba(59,130,246,0.12)",border:`1px solid ${s?"rgba(139,92,246,0.3)":"rgba(59,130,246,0.3)"}`,borderRadius:"5px",color:s?"#a78bfa":"#60a5fa",padding:"2px 6px",fontSize:"9px",fontWeight:700},children:s?"Admin":"Crew"})]}),o&&n.jsx("div",{style:{fontSize:"10px",color:"#4a5f78"},children:o})]})]}),n.jsx("div",{style:{fontSize:"11px",color:"#4a5f78"},children:a?.full_name})]})}var o=r(5047);let l=[{id:"home",path:"/home",label:"Home",icon:"\uD83C\uDFE0"},{id:"time",path:"/time",label:"Time Clock",icon:"⏰"},{id:"vehicles",path:"/vehicles",label:"Vehicles",icon:"\uD83D\uDE90"},{id:"more",path:"/more",label:"More",icon:"⋯"}];function d({clockStatus:e}){let t=(0,o.usePathname)(),r=(0,o.useRouter)(),i=t=>{if("time"===t.id){if("in"===e)return"\uD83D\uDFE2";if("break"===e)return"\uD83D\uDFE1"}return t.icon},a=e=>"/home"===e.path?"/home"===t||"/scan"===t||"/select-part"===t||"/photos"===t:t.startsWith(e.path);return n.jsx("nav",{style:{position:"fixed",bottom:0,left:0,right:0,background:"#141e2b",borderTop:"1px solid #1e2d3d",display:"flex",zIndex:100,paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:l.map(e=>(0,n.jsxs)("button",{onClick:()=>r.push(e.path),style:{flex:1,padding:"8px 4px 10px",display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",color:a(e)?"#60a5fa":"#4a5f78"},children:[n.jsx("div",{style:{fontSize:"18px"},children:i(e)}),n.jsx("div",{style:{fontSize:"10px",fontWeight:700},children:e.label})]},e.id))})}function c({children:e}){let{loading:t}=(0,i.a)(),{clockStatus:r,activePart:o,appLoading:l}=(0,a.q)();return t||l?n.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsxs)("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{width:"36px",height:"36px",border:"3px solid #1e2d3d",borderTopColor:"#3b82f6",borderRadius:"50%",margin:"0 auto",animation:"spin 1s linear infinite"}}),n.jsx("div",{style:{color:"#4a5f78",marginTop:"12px",fontSize:"13px"},children:"Loading..."})]})}):(0,n.jsxs)("div",{style:{minHeight:"100vh",paddingBottom:"70px"},children:[n.jsx(s,{clockStatus:r,activePartNumber:o?.part_number,activeEndCustomer:o?.end_customer}),n.jsx("div",{style:{maxWidth:"500px",margin:"0 auto",padding:"14px 20px"},children:e}),n.jsx(d,{clockStatus:r})]})}function p({children:e}){return n.jsx(i.H,{children:n.jsx(a.w,{children:n.jsx(c,{children:e})})})}},2064:(e,t,r)=>{"use strict";r.d(t,{q:()=>d,w:()=>l});var n=r(326),i=r(7577),a=r(1944),s=r(2567);let o=(0,i.createContext)({});function l({children:e}){let{user:t}=(0,s.a)(),r=(0,a.e)(),[l,d]=(0,i.useState)("out"),[c,p]=(0,i.useState)(null),[u,x]=(0,i.useState)(null),[m,g]=(0,i.useState)([]),[h,f]=(0,i.useState)(0),[b,v]=(0,i.useState)(null),[_,y]=(0,i.useState)(null),[j,k]=(0,i.useState)(!0),S=(0,i.useCallback)(async()=>{if(!t)return;let e=new Date().toISOString(),{data:n,error:i}=await r.from("time_entries").insert({user_id:t.id,clock_in:e,status:"clocked_in"}).select().single();n&&!i&&(v(n),p(e),g([]),d("in"),f(0))},[t,r]),P=(0,i.useCallback)(async()=>{if(!b)return;let e=new Date().toISOString(),{data:t}=await r.from("time_breaks").insert({time_entry_id:b.id,break_start:e}).select().single();await r.from("time_entries").update({status:"on_break"}).eq("id",b.id),t&&(g(e=>[...e,t]),x(e),d("break"))},[b,r]),C=(0,i.useCallback)(async()=>{if(!b||!u)return;let e=new Date().toISOString(),t=m.find(e=>!e.break_end);t&&(await r.from("time_breaks").update({break_end:e}).eq("id",t.id),g(r=>r.map(r=>r.id===t.id?{...r,break_end:e}:r))),await r.from("time_entries").update({status:"clocked_in"}).eq("id",b.id),x(null),d("in")},[b,u,m,r]),w=(0,i.useCallback)(async()=>{if(!b||!c)return;let e=new Date,t=e.toISOString(),n=m.find(e=>!e.break_end);n&&await r.from("time_breaks").update({break_end:t}).eq("id",n.id);let i=e.getTime()-new Date(c).getTime();m.map(e=>({...e,break_end:e.break_end||t})).forEach(e=>{i-=new Date(e.break_end).getTime()-new Date(e.break_start).getTime()}),await r.from("time_entries").update({clock_out:t,status:"clocked_out",total_ms:Math.max(0,i)}).eq("id",b.id),d("out"),p(null),x(null),g([]),f(0),v(null)},[b,c,m,r]);return n.jsx(o.Provider,{value:{clockStatus:l,clockInTime:c,breakStartTime:u,currentBreaks:m,elapsed:h,activeTimeEntry:b,doClockIn:S,doStartBreak:P,doEndBreak:C,doClockOut:w,activePart:_,setActivePart:y,appLoading:j},children:e})}let d=()=>(0,i.useContext)(o)},2567:(e,t,r)=>{"use strict";r.d(t,{H:()=>o,a:()=>l});var n=r(326),i=r(7577),a=r(1944);let s=(0,i.createContext)({user:null,profile:null,isAdmin:!1,loading:!0,signOut:async()=>{}});function o({children:e}){let[t,r]=(0,i.useState)(null),[o,l]=(0,i.useState)(null),[d,c]=(0,i.useState)(!0),p=(0,a.e)(),u=async()=>{await p.auth.signOut(),r(null),l(null)};return n.jsx(s.Provider,{value:{user:t,profile:o,isAdmin:o?.role==="admin",loading:d,signOut:u},children:e})}let l=()=>(0,i.useContext)(s)},1944:(e,t,r)=>{"use strict";r.d(t,{e:()=>i});var n=r(861);function i(){return(0,n.createBrowserClient)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},1671:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(8570).createProxy)(String.raw`/Users/craiggeorge/Desktop/bmg-ops/src/app/(main)/admin/catalog/page.tsx#default`)},8522:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(8570).createProxy)(String.raw`/Users/craiggeorge/Desktop/bmg-ops/src/app/(main)/layout.tsx#default`)},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s,metadata:()=>i,viewport:()=>a});var n=r(9510);r(5023);let i={title:"BMG Ops",description:"BMG Fleet Installations Operations App",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"black-translucent",title:"BMG Ops"}},a={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,themeColor:"#0f1720"};function s({children:e}){return(0,n.jsxs)("html",{lang:"en",children:[n.jsx("head",{children:n.jsx("link",{rel:"apple-touch-icon",href:"/icon-192.png"})}),n.jsx("body",{children:e})]})}},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,471,861],()=>r(9172));module.exports=n})();