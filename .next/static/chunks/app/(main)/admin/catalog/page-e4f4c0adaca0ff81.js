(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[432],{1436:function(e,t,r){Promise.resolve().then(r.bind(r,6724))},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},6724:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(7437),a=r(2265),i=r(9376),o=r(4754),s=r(2582);function l(){let e=(0,i.useRouter)(),{isAdmin:t}=(0,s.a)(),r=(0,o.e)(),[l,p]=(0,a.useState)([]),[h,f]=(0,a.useState)(!0),[x,g]=(0,a.useState)(!1),[m,b]=(0,a.useState)({part_number:"",customer:"Masterack",end_customer:"",vehicle_type:"",graphic_package:"",price:"",proof_pages:"1"});(0,a.useEffect)(()=>{if(!t){e.push("/home");return}(async()=>{let{data:e}=await r.from("catalog").select("*").order("part_number");p(e||[]),f(!1)})()},[t]);let v=async()=>{if(!m.part_number||!m.customer)return;let{data:e,error:t}=await r.from("catalog").insert({part_number:m.part_number,customer:m.customer,end_customer:m.end_customer,vehicle_type:m.vehicle_type,graphic_package:m.graphic_package,price:Number(m.price)||0,proof_pages:Number(m.proof_pages)||1}).select().single();e&&!t&&(p(t=>[...t,e].sort((e,t)=>e.part_number.localeCompare(t.part_number))),b({part_number:"",customer:"Masterack",end_customer:"",vehicle_type:"",graphic_package:"",price:"",proof_pages:"1"}),g(!1))};return h?(0,n.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#4a5f78"},children:"Loading..."}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,n.jsxs)("div",{style:{fontSize:"11px",fontWeight:700,color:"#4a5f78",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Part Catalog (",l.length,")"]}),(0,n.jsx)("button",{onClick:()=>g(!x),style:{padding:"6px 12px",borderRadius:"8px",background:"#3b82f6",color:"#fff",fontSize:"12px",fontWeight:700},children:x?"Cancel":"+ Add"})]}),x&&(0,n.jsxs)("div",{style:{background:"#141e2b",border:"1px solid #1e2d3d",borderRadius:"10px",padding:"14px",marginBottom:"12px"},children:[(0,n.jsx)(d,{label:"Part Number",value:m.part_number,onChange:e=>b({...m,part_number:e})}),(0,n.jsxs)("div",{style:{marginTop:"8px"},children:[(0,n.jsx)("label",{style:u,children:"Customer"}),(0,n.jsxs)("select",{value:m.customer,onChange:e=>b({...m,customer:e.target.value}),style:c,children:[(0,n.jsx)("option",{children:"Masterack"}),(0,n.jsx)("option",{children:"Knapheide"}),(0,n.jsx)("option",{children:"Bodewell"}),(0,n.jsx)("option",{children:"Designs That Stick"}),(0,n.jsx)("option",{children:"Other"})]})]}),(0,n.jsx)(d,{label:"End Customer",value:m.end_customer,onChange:e=>b({...m,end_customer:e})}),(0,n.jsx)(d,{label:"Vehicle Type",value:m.vehicle_type,onChange:e=>b({...m,vehicle_type:e})}),(0,n.jsx)(d,{label:"Graphic Package",value:m.graphic_package,onChange:e=>b({...m,graphic_package:e})}),(0,n.jsx)(d,{label:"Price",value:m.price,onChange:e=>b({...m,price:e}),type:"number"}),(0,n.jsx)(d,{label:"Proof Pages",value:m.proof_pages,onChange:e=>b({...m,proof_pages:e}),type:"number"}),(0,n.jsx)("button",{onClick:v,style:{width:"100%",marginTop:"12px",padding:"12px",borderRadius:"10px",background:"#22c55e",color:"#fff",fontWeight:800,fontSize:"14px"},children:"Save Part Number"})]}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:l.map(e=>(0,n.jsx)("div",{style:{background:"#141e2b",border:"1px solid #1e2d3d",borderRadius:"10px",padding:"12px"},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:800,fontSize:"15px"},children:e.part_number}),(0,n.jsxs)("div",{style:{fontSize:"12px",color:"#93c5fd",marginTop:"1px"},children:[e.end_customer," — ",e.graphic_package]}),(0,n.jsxs)("div",{style:{fontSize:"11px",color:"#4a5f78"},children:[e.vehicle_type," • ",e.customer]})]}),(0,n.jsx)("div",{style:{textAlign:"right"},children:(0,n.jsxs)("div",{style:{fontWeight:800,fontSize:"15px",color:"#4ade80"},children:["$",e.price.toFixed(2)]})})]})},e.id))}),(0,n.jsx)("button",{onClick:()=>e.push("/more"),style:{width:"100%",padding:"10px",borderRadius:"10px",marginTop:"14px",border:"1px solid #1e2d3d",background:"transparent",color:"#6b7a8d",fontSize:"13px",fontWeight:700},children:"← Back"})]})}let u={display:"block",fontSize:"10px",fontWeight:700,color:"#4a5f78",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"4px"},c={width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #1e2d3d",background:"#0f1720",color:"#e8ecf1",fontSize:"13px"};function d(e){let{label:t,value:r,onChange:a,type:i}=e;return(0,n.jsxs)("div",{style:{marginTop:"8px"},children:[(0,n.jsx)("label",{style:u,children:t}),(0,n.jsx)("input",{type:i||"text",value:r,onChange:e=>a(e.target.value),style:c})]})}},2582:function(e,t,r){"use strict";r.d(t,{H:function(){return s},a:function(){return l}});var n=r(7437),a=r(2265),i=r(4754);let o=(0,a.createContext)({user:null,profile:null,isAdmin:!1,loading:!0,signOut:async()=>{}});function s(e){let{children:t}=e,[r,s]=(0,a.useState)(null),[l,u]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),p=(0,i.e)();(0,a.useEffect)(()=>{let e=!1;(async()=>{try{var t;let{data:{session:r}}=await p.auth.getSession(),n=null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null;if(e)return;if(s(n),n){let{data:t}=await p.from("profiles").select("*").eq("id",n.id).maybeSingle();e||u(t)}}catch(e){if((null==e?void 0:e.name)==="AbortError")return;console.error("Auth init error:",e)}e||d(!1)})();let{data:{subscription:t}}=p.auth.onAuthStateChange(async(t,r)=>{try{var n;if(e)return;if(s(null!==(n=null==r?void 0:r.user)&&void 0!==n?n:null),null==r?void 0:r.user){let{data:t}=await p.from("profiles").select("*").eq("id",r.user.id).maybeSingle();e||u(t)}else u(null)}catch(e){if((null==e?void 0:e.name)==="AbortError")return;console.error("Auth state error:",e)}e||d(!1)});return()=>{e=!0,t.unsubscribe()}},[]);let h=async()=>{await p.auth.signOut(),s(null),u(null)};return(0,n.jsx)(o.Provider,{value:{user:r,profile:l,isAdmin:(null==l?void 0:l.role)==="admin",loading:c,signOut:h},children:t})}let l=()=>(0,a.useContext)(o)},4754:function(e,t,r){"use strict";r.d(t,{e:function(){return i}});var n=r(4033),a=r(257);function i(){return(0,n.createBrowserClient)(a.env.NEXT_PUBLIC_SUPABASE_URL,a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}}},function(e){e.O(0,[368,971,117,744],function(){return e(e.s=1436)}),_N_E=e.O()}]);