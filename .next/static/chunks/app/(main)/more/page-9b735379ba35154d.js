(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19],{918:function(e,n,t){Promise.resolve().then(t.bind(t,6448))},9376:function(e,n,t){"use strict";var r=t(5475);t.o(r,"useParams")&&t.d(n,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(n,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(n,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(n,{useSearchParams:function(){return r.useSearchParams}})},6448:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return s}});var r=t(7437),i=t(9376),o=t(2582);function s(){let e=(0,i.useRouter)(),{isAdmin:n,profile:t,signOut:s}=(0,o.a)();return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontSize:"11px",fontWeight:700,color:"#4a5f78",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px"},children:"More"}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,r.jsx)(u,{icon:"\uD83D\uDCCA",title:"Export Reports",sub:"Download vehicle spreadsheets",onClick:()=>e.push("/reports")}),n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{icon:"\uD83D\uDCE6",title:"Part Catalog",sub:"Manage part numbers",onClick:()=>e.push("/admin/catalog")}),(0,r.jsx)(u,{icon:"\uD83D\uDCCB",title:"Purchase Orders",sub:"Manage POs",onClick:()=>e.push("/admin/pos")})]}),(0,r.jsx)(u,{icon:"\uD83D\uDCDD",title:"Quick Job (No PO)",sub:"Start scanning without a PO",onClick:()=>e.push("/scan")})]}),(0,r.jsxs)("div",{style:{marginTop:"32px",padding:"14px",background:"#141e2b",border:"1px solid #1e2d3d",borderRadius:"10px"},children:[(0,r.jsx)("div",{style:{fontSize:"13px",fontWeight:700},children:null==t?void 0:t.full_name}),(0,r.jsx)("div",{style:{fontSize:"11px",color:"#4a5f78",marginTop:"2px"},children:null==t?void 0:t.email}),(0,r.jsx)("div",{style:{fontSize:"11px",color:n?"#a78bfa":"#60a5fa",marginTop:"2px",fontWeight:600},children:n?"Administrator":"Installer"}),(0,r.jsx)("button",{onClick:s,style:{marginTop:"12px",width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid rgba(239,68,68,0.25)",background:"rgba(239,68,68,0.05)",color:"#f87171",fontSize:"13px",fontWeight:700},children:"Sign Out"})]})]})}function u(e){let{icon:n,title:t,sub:i,onClick:o}=e;return(0,r.jsxs)("button",{onClick:o,style:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"12px",borderRadius:"10px",textAlign:"left",border:"1px solid #1e2d3d",background:"#141e2b",color:"#e8ecf1"},children:[(0,r.jsx)("div",{style:{width:"38px",height:"38px",borderRadius:"8px",background:"rgba(255,255,255,0.03)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"17px",flexShrink:0},children:n}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontWeight:700,fontSize:"14px"},children:t}),(0,r.jsx)("div",{style:{fontSize:"11px",color:"#4a5f78",marginTop:"1px"},children:i})]})]})}},2582:function(e,n,t){"use strict";t.d(n,{H:function(){return u},a:function(){return l}});var r=t(7437),i=t(2265),o=t(4754);let s=(0,i.createContext)({user:null,profile:null,isAdmin:!1,loading:!0,signOut:async()=>{}});function u(e){let{children:n}=e,[t,u]=(0,i.useState)(null),[l,a]=(0,i.useState)(null),[d,c]=(0,i.useState)(!0),f=(0,o.e)();(0,i.useEffect)(()=>{let e=!1;(async()=>{try{var n;let{data:{session:t}}=await f.auth.getSession(),r=null!==(n=null==t?void 0:t.user)&&void 0!==n?n:null;if(e)return;if(u(r),r){let{data:n}=await f.from("profiles").select("*").eq("id",r.id).maybeSingle();e||a(n)}}catch(e){if((null==e?void 0:e.name)==="AbortError")return;console.error("Auth init error:",e)}e||c(!1)})();let{data:{subscription:n}}=f.auth.onAuthStateChange(async(n,t)=>{try{var r;if(e)return;if(u(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),null==t?void 0:t.user){let{data:n}=await f.from("profiles").select("*").eq("id",t.user.id).maybeSingle();e||a(n)}else a(null)}catch(e){if((null==e?void 0:e.name)==="AbortError")return;console.error("Auth state error:",e)}e||c(!1)});return()=>{e=!0,n.unsubscribe()}},[]);let p=async()=>{await f.auth.signOut(),u(null),a(null)};return(0,r.jsx)(s.Provider,{value:{user:t,profile:l,isAdmin:(null==l?void 0:l.role)==="admin",loading:d,signOut:p},children:n})}let l=()=>(0,i.useContext)(s)},4754:function(e,n,t){"use strict";t.d(n,{e:function(){return o}});var r=t(4033),i=t(257);function o(){return(0,r.createBrowserClient)(i.env.NEXT_PUBLIC_SUPABASE_URL,i.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}}},function(e){e.O(0,[368,971,117,744],function(){return e(e.s=918)}),_N_E=e.O()}]);