(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{3892:function(e,t,i){Promise.resolve().then(i.bind(i,209))},9376:function(e,t,i){"use strict";var n=i(5475);i.o(n,"useParams")&&i.d(t,{useParams:function(){return n.useParams}}),i.o(n,"usePathname")&&i.d(t,{usePathname:function(){return n.usePathname}}),i.o(n,"useRouter")&&i.d(t,{useRouter:function(){return n.useRouter}}),i.o(n,"useSearchParams")&&i.d(t,{useSearchParams:function(){return n.useSearchParams}})},209:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return l}});var n=i(7437),r=i(2265),o=i(9376),s=i(4754);function l(){let e=(0,o.useParams)().id,t=(0,s.e)(),[i,l]=(0,r.useState)(null),[a,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(!0),[x,u]=(0,r.useState)(!1),[f,h]=(0,r.useState)(null);if((0,r.useEffect)(()=>{e&&(async()=>{var{data:i,error:n}=await t.from("scanned_vehicles").select("*").eq("id",e).single();if(n||!i){u(!0),p(!1);return}l(i);var{data:r}=await t.from("vehicle_photos").select("*").eq("vehicle_id",e).order("taken_at",{ascending:!0});d(await Promise.all((r||[]).map(async function(e){var{data:i}=t.storage.from("photos").getPublicUrl(e.storage_path);return{...e,url:i.publicUrl}}))),p(!1)})()},[e]),c)return(0,n.jsx)("div",{style:{minHeight:"100vh",background:"#0a1017",color:"#e8ecf1",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("div",{style:{width:"36px",height:"36px",border:"3px solid #1e2d3d",borderTopColor:"#3b82f6",borderRadius:"50%",margin:"0 auto",animation:"spin 1s linear infinite"}}),(0,n.jsx)("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),(0,n.jsx)("div",{style:{color:"#4a5f78",marginTop:"12px",fontSize:"13px"},children:"Loading..."})]})});if(x)return(0,n.jsx)("div",{style:{minHeight:"100vh",background:"#0a1017",color:"#e8ecf1",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("div",{style:{fontSize:"48px",marginBottom:"12px",opacity:.4},children:"\uD83D\uDEAB"}),(0,n.jsx)("div",{style:{fontWeight:700,fontSize:"16px"},children:"Vehicle Not Found"}),(0,n.jsx)("div",{style:{color:"#4a5f78",fontSize:"13px",marginTop:"4px"},children:"This link may be invalid or expired."})]})});var g=i?[i.vehicle_year,i.vehicle_make,i.vehicle_model].filter(Boolean).join(" "):"Vehicle";return(0,n.jsxs)("div",{style:{minHeight:"100vh",background:"#0a1017",color:"#e8ecf1"},children:[(0,n.jsxs)("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"20px 16px"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"20px"},children:[(0,n.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"rgba(59,130,246,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:800,color:"#3b82f6"},children:"B"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:800,fontSize:"11px",color:"#4a5f78",textTransform:"uppercase",letterSpacing:"1px"},children:"BMG Fleet Installations"}),(0,n.jsx)("div",{style:{fontSize:"10px",color:"#3a4a5c"},children:"Vehicle Completion Report"})]})]}),(0,n.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a2a3f, #1e3350)",border:"1px solid #2a4a6f",borderRadius:"14px",padding:"18px",marginBottom:"16px"},children:[(0,n.jsx)("div",{style:{fontSize:"10px",color:"#4a5f78",fontWeight:600,letterSpacing:"1px",textTransform:"uppercase"},children:"VIN"}),(0,n.jsx)("div",{style:{fontSize:"13px",fontFamily:"monospace",color:"#93c5fd",fontWeight:700,letterSpacing:"1.5px",marginTop:"2px",marginBottom:"10px",wordBreak:"break-all"},children:i.vin}),(0,n.jsx)("div",{style:{fontSize:"20px",fontWeight:800},children:g||"Unknown Vehicle"}),i.body_class&&(0,n.jsx)("div",{style:{fontSize:"13px",color:"#6b7a8d",marginTop:"2px"},children:i.body_class}),i.part_number&&(0,n.jsxs)("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(42,74,111,0.5)"},children:[(0,n.jsx)("div",{style:{fontSize:"12px",color:"#60a5fa",fontWeight:700},children:i.part_number}),i.end_customer&&(0,n.jsx)("div",{style:{fontSize:"11px",color:"#4a5f78"},children:i.end_customer})]}),i.scanned_at&&(0,n.jsxs)("div",{style:{fontSize:"11px",color:"#3a4a5c",marginTop:"8px"},children:["Completed: ",new Date(i.scanned_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),a.length>0?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{fontSize:"11px",fontWeight:700,color:"#4a5f78",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"10px"},children:["Completion Photos (",a.length,")"]}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"6px"},children:a.map(function(e){return(0,n.jsx)("div",{onClick:function(){h(e.url||null)},style:{position:"relative",paddingTop:"75%",borderRadius:"10px",overflow:"hidden",background:"#141e2b",cursor:"pointer"},children:e.url&&(0,n.jsx)("img",{src:e.url,alt:"Vehicle completion photo",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})},e.id)})})]}):(0,n.jsx)("div",{style:{textAlign:"center",padding:"28px 0",color:"#4a5f78"},children:(0,n.jsx)("div",{style:{fontSize:"13px",fontWeight:600},children:"No completion photos available"})}),(0,n.jsx)("div",{style:{textAlign:"center",marginTop:"32px",paddingTop:"16px",borderTop:"1px solid #1e2d3d"},children:(0,n.jsx)("div",{style:{fontSize:"11px",color:"#3a4a5c"},children:"BMG Fleet Installations LLC"})})]}),f&&(0,n.jsxs)("div",{onClick:function(){h(null)},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:[(0,n.jsx)("img",{src:f,alt:"Full size",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",borderRadius:"8px"}}),(0,n.jsx)("div",{style:{position:"absolute",top:"20px",right:"20px",color:"#fff",fontSize:"24px",fontWeight:700,cursor:"pointer"},children:"âœ•"})]})]})}},4754:function(e,t,i){"use strict";i.d(t,{e:function(){return o}});var n=i(4033),r=i(257);function o(){return(0,n.createBrowserClient)(r.env.NEXT_PUBLIC_SUPABASE_URL,r.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}}},function(e){e.O(0,[368,971,117,744],function(){return e(e.s=3892)}),_N_E=e.O()}]);